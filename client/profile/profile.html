<template name="profile">
  <div class="page-header">
    {{# with user }}
    {{> userinfoheader }}
    {{/ with }}
  </div>
    {{# if Template.subscriptionsReady }}
      {{# if hasPosts }}
        <ul class="media-list">
        {{# each posts }}
          {{> post }}
        {{/ each }}
        </ul>
      {{ else }}
        <h4>This user hasn't posted anything..</h4>
      {{/ if }}
    {{ else }}
      <div class="row">
        <div class="col-lg-4">
          {{> spinner }}
        </div>
      </div>
    {{/ if }}
</template>

<template name="userinfoheader">
  <div class="row">
    <div class="col-sm-2">
      <img src="{{ identicon displayName }}" alt="{{ displayName }}" class="img img-responsive"/>
    </div>
    <div class="col-sm-10">
      <h1>{{ displayName }}</h1>
      <p class="lead">Member since {{ memberSince }}</p>
      <p>Followers: {{ followerCount }}</p>
      <p>Following: {{ usersFollowedCount }}</p>
      {{# if currentUser }}
        {{# if notCurrentUserProfile }}
        {{# if isFollowing }}
          <button class="btn btn-md btn-success">Direct Message</button>
          <button class="btn btn-md btn-danger follow-user">Unfollow</button>
        {{ else }}
          <button class="btn btn-md btn-info follow-user">Follow</button>
        {{/if }}
        {{/if }}
      {{/ if }}
    </div>
  </div>
</template>
