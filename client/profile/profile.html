<template name="profile">
  <div class="page-header">
    {{# with user }}
    {{> userinfoheader }}
    {{/ with }}
  </div>
  <ul class="media-list">
    {{# if Template.subscriptionsReady }}
      {{# if hasPosts }}
        {{# each posts }}
          {{> post }}
        {{/ each }}
      {{ else }}
        <h4>This user hasn't posted anything..</h4>
      {{/ if }}
    {{/ if }}
  </ul>
</template>

<template name="userinfoheader">
  <div class="row">
    <div class="col-sm-2">
      <img src="{{ identicon displayName }}" alt="{{ displayName }}" class="img img-responsive"/>
    </div>
    <div class="col-sm-10">
      <h1>{{ displayName }}</h1>
      <p class="strong">Member since {{ memberSince }}</p>
      {{# if currentUser }}
        {{# if isFollowing }}
          <button class="btn btn-md btn-success">Direct Message</button>
          <button class="btn btn-md btn-danger follow-user">Unfollow</button>
        {{ else }}
          <button class="btn btn-md btn-info follow-user">Follow</button>
        {{/if }}
      {{/ if }}
    </div>
  </div>
</template>
